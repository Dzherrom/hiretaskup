{% extends 'layouts/base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/contact.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/css/intlTelInput.min.css"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
{% endblock extra_css %}

{% block content %}
<div class="consultation-banner">
    Book a Consultation Today and Save $200. Ends June 30.
</div>
<div class="consultation-container">
    <div class="consultation-left">
        <div class="consultation-card">
            <img src="{% static 'img/hero.png' %}" alt="TaskUp" class="consultation-logo">
            <h2>TaskUp Specialists Are<br>Available 24/7<br>for Personalized Consultation</h2>
            <p>Schedule a meeting and:</p>
            <ul class="consultation-features">
                <li>Tell us about your project</li>
                <li>Learn about our recruitment process</li>
                <li>Discover the TaskUp Workspace app</li>
            </ul>
            <div class="consultation-testimonial">
                <div class="testimonial-header">
                    <div>
                        <strong>Dylan Schiemann</strong><br>
                        <span>Co-founder &amp; CEO<br>livingspec.com</span>
                    </div>
                    <span class="testimonial-stars">★★★★★</span>
                </div>
                <p>
                    TaskUp provides exceptional Virtual Assistant services and an accompanying productivity platform. Using TaskUp has been incredibly beneficial for our business, allowing us to explore some things in far more depth, or scale up some operations more effectively. Some of the benefits far exceed what you might expect from a virtual assistant in terms of capabilities and outside traditional administrative work.
                </p>
            </div>
            <div class="consultation-rating">
                Rated <span>★★★★★</span> on
                <img src="{% static 'img/google.png' %}" alt="Google">
                <img src="{% static 'img/goodfirms.png' %}" alt="GoodFirms">
                <img src="{% static 'img/clutch.png' %}" alt="Clutch">
                <img src="{% static 'img/producthunt.png' %}" alt="Product Hunt">
            </div>
        </div>
    </div>
    <div class="consultation-right">
        <div class="calendar-card">
            <h3>Select a Day</h3>
            <input type="text" id="calendar" class="calendar-input" readonly>
            <div class="timezone">
                <span>Time zone</span>
                <select id="timezone-select" style="width:100%"></select>
            </div>
        </div>
        <div class="time-selection-card" id="timeSelectionCard" style="display:none;">
            <button type="button" id="backToCalendar" class="back-btn">&#8592;</button>
            <div class="selected-date-info">
                <div class="selected-day" id="selectedDay"></div>
                <div class="selected-date" id="selectedDate"></div>
                <div class="selected-timezone">
                    <span>Time zone</span>
                    <span id="selectedTimezone"></span>
                </div>
            </div>
            <hr>
            <h3>Select a Time</h3>
            <div class="duration">Duration: 20 min</div>
            <div class="time-slots" id="timeSlots"></div>
        </div>  
        <div class="confirmation-form-card" id="confirmationFormCard" style="display:none;">
            <button type="button" id="backToTimeSelection" class="back-btn">&#8592;</button>
            <div class="confirmation-summary">
                <h2>Chat with TaskUp Team</h2>
                <div class="summary-details">
                    <div><span><img src="{% static 'img/clock.png' %}"></span> 20 min</div>
                    <div><span><img src="{% static 'img/calendar.png' %}"></span> <span id="summaryTime"></span></div>
                    <div><span><img src="{% static 'img/timezone.png' %}"></span> <span id="summaryTimezone"></span></div>
                </div>
                <div class="summary-description">
                    <button type="button" class="desc-toggle">
                        <span style="font-size:1.2em;">&#9660;</span> Description
                    </button>
                    <div class="desc-content">
                        Welcome to TaskUp! We can get you started in just a few days! Looking forward to meeting you on our Google Meet call!
                    </div>
                </div>
            </div>
            <form class="confirmation-form" method="post" action="{% url 'contact' %}">
                {% csrf_token %}

                {% if form.non_field_errors %}
                    <div class="error-msg">{{ form.non_field_errors.0 }}</div>
                {% endif %}

                <label for="id_name">Name *</label>
                <input type="text" name="name" id="id_name" value="{{ form.name.value|default_if_none:'' }}" required>
                {% if form.name.errors %}
                    <div class="error-msg">{{ form.name.errors.0 }}</div>
                {% endif %}

                <label for="id_email">Email *</label>
                <input type="email" name="email" id="id_email" value="{{ form.email.value|default_if_none:'' }}" required>
                {% if form.email.errors %}
                    <div class="error-msg">{{ form.email.errors.0 }}</div>
                {% endif %}

                <label for="id_guests">Guest Email(s)</label>
                <input type="text" name="guests" id="id_guests" value="{{ form.guests.value|default_if_none:'' }}">
                {% if form.guests.errors %}
                    <div class="error-msg">{{ form.guests.errors.0 }}</div>
                {% endif %}

                <label for="id_important">What is one of the most important things that your TaskUp assistant will do for you?</label>
                <input type="text" name="important" id="id_important" value="{{ form.important.value|default_if_none:'' }}" required>
                {% if form.important.errors %}
                    <div class="error-msg">{{ form.important.errors.0 }}</div>
                {% endif %}

                <label for="id_phone">Phone *</label>
                <input type="tel" name="phone" id="id_phone" value="{{ form.phone.value|default_if_none:'' }}" required>
                {% if form.phone.errors %}
                    <div class="error-msg">{{ form.phone.errors.0 }}</div>
                {% endif %}

                <!-- Campos ocultos para enviar los datos -->
                <input type="hidden" name="date" id="hiddenDate" value="{{ form.date.value|default_if_none:'' }}">
                <input type="hidden" name="time" id="hiddenTime" value="{{ form.time.value|default_if_none:'14:00' }}">
                <input type="hidden" name="timezone" id="hiddenTimezone" value="{{ form.timezone.value|default_if_none:'' }}">

                {% if form.date.errors %}
                    <div class="error-msg">{{ form.date.errors.0 }}</div>
                {% endif %}
                {% if form.time.errors %}
                    <div class="error-msg">{{ form.time.errors.0 }}</div>
                {% endif %}
                {% if form.timezone.errors %}
                    <div class="error-msg">{{ form.timezone.errors.0 }}</div>
                {% endif %}

                <button type="submit" class="schedule-btn">Schedule Event</button>
            </form>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/min/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-timezone@0.5.43/builds/moment-timezone-with-data.min.js"></script>    
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment-timezone@0.5.43/builds/moment-timezone-with-data.min.js"></script>
<script src="{% static 'js/contact.js' %}"></script>
{% endblock content %}

